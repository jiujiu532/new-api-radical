# 和Newapi上游的区别

1. 实现维护模型健康度（健康度是一个时间的比值，每5分钟一个单位，如果该单位内只有失败的请求，那么记为失败时间片，如果有一个或多个成功请求并且（返回的byte长度大于1k或完成token大于2或实际响应模型回复大于2char），记为成功时间片，可查看不同小时时间段的模型成功率），实现后端和对应前端，，设计数据结构和新表实现良好性能。实现对非管理员隐藏可自定义模型和时间的查询（在控制台），并实现在导航栏添加新的页面（新页面所有用户即使非登录也可查看），显示所有模型最近24小时每小时的健康度。【已实现】
2. 若Newapi无法实现在对所有用户限速的情况下，使用标签解除对应的限速（而不是其他限速），那么添加管理员豁免用户限速RPM【已实现】
3. 实现缓存最近100次API调用的请求和返回信息到内存里（包括报错，记录客户端原始请求和上游原始响应（包括上游原始流式响应）），提供UI查阅，实现后端和对应前端，设计数据结构和新表实现良好性能【已实现】
4. 实现按可选定的小时统计用户的总调用次数（可分别显示成功次数或报错次数）并降序显示，实现后端和对应前端，设计数据结构和新表实现良好性能【已实现】
5. 实现生成随机兑换码（输入最小值和最大值，以及其他普通兑换码具有的字段，并且支持设置生成的兑换码前缀，生成随机的兑换码并提供文件下载），实现后端和对应前端【已实现】
6. 实现模型自定义配置没有将特定role转换为另一种role的功能的话实现它。不是全局模型映射，而是每个渠道一个配置，加入渠道额外设置
7. 实现强制在日志记录IP，即使用户关闭IP记录【已实现】
8. web\public\oauth-redirect.html 多站点重定向登录【已实现】
9. 实现接入 fingerprintjs/fingerprintjs 库